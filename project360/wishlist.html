<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Wishlist & Just For You</title>
  
  <!-- Bootstrap CSS -->
  <link 
    rel="stylesheet" 
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
  />
  <!-- Bootstrap Icons -->
  <link 
    rel="stylesheet" 
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
  />
  <!-- Custom CSS -->
  <link rel="stylesheet" href="wishlist.css"/>
</head>
<body>
<div id = "header"></div>
<div class="container my-4">
  <!-- Wishlist Section -->
  <div class="wishlist-section p-3 border rounded mb-4">
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center">
      <h5 class="fw-bold mb-0" id = "wishlistHeader">Wishlist (4)</h5>
      <button class="btn btn-outline-dark btn-sm" id = "moveAllButton">Move All To Bag</button>
    </div>


<!--Wishlist section-->
<div class="row row-cols-2 row-cols-md-4 g-3 mt-3" id="wishlistContainer">
  <!-- Currently static product cards -->
</div>

  </div>

  <!-- Just For You Section -->
  <div class="just-for-you-section p-3 border rounded">
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center">
      <h5 class="fw-bold mb-0">Just For You</h5>
     
    </div>

    <!-- Products Grid -->
    <div class="row row-cols-2 row-cols-md-4 g-3 mt-3" id="justForYouContainer"> <!-- Changed grid setup -->
      <!-- Product 1 -->
      <div class="col">
        <div class="product-card h-100 p-3 position-relative d-flex flex-column"> <!-- Added height & flex -->
          <span class="discount-badge">-35%</span>
          <div class="text-center mb-2">
            <img 
              src="images/asusgaming.webp" 
              alt="ASUS FHD Gaming Laptop" 
              class="img-fluid product-img"
            />
          </div>
          <button class="btn btn-danger w-100 btn-sm mb-1">Add To Cart</button>
          <p class="mb-0 fw-semibold">ASUS FHD Gaming Laptop</p>
          <p class="text-danger mb-1">$960 
            <span class="text-muted text-decoration-line-through">$1160</span>
          </p>
          <!-- Star Rating -->
          <div class="star-rating">
            <i class="bi bi-star-fill"></i>
            <i class="bi bi-star-fill"></i>
            <i class="bi bi-star-fill"></i>
            <i class="bi bi-star-fill"></i>
            <i class="bi bi-star-fill"></i>
            <span class="text-muted">(65)</span>
          </div>
        </div>
      </div>
      <div class="col">
          <div class="product-card h-100 p-3 position-relative d-flex flex-column"> <!-- Added height & flex -->
            <div class="text-center mb-2">
              <img 
                src="images/monitor_gaming.jpeg" 
                alt="IPS LCD Gaming Monitor" 
                class="img-fluid product-img"
              />
            </div>
            <button class="btn btn-danger w-100 btn-sm mb-1">Add To Cart</button>
            <p class="mb-0 fw-semibold">IPS LCD Gaming Monitor</p>
            <p class="text-danger mb-1">$1160</p>
            <div class="star-rating">
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
              <span class="text-muted">(65)</span>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="product-card h-100 p-3 position-relative d-flex flex-column"> <!-- Added height & flex -->
            <span class="new-badge">NEW</span>
            <div class="text-center mb-2">
              <img 
                src="images/havit.jpg" 
                alt="HAVIT HV-G92 Gamepad" 
                class="img-fluid product-img"
              />
            </div>
            <button class="btn btn-danger w-100 btn-sm mb-1">Add To Cart</button>
            <p class="mb-0 fw-semibold">HAVIT HV-G92 Gamepad</p>
            <p class="text-danger mb-1">$560</p>
            <div class="star-rating">
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
              <span class="text-muted">(65)</span>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="product-card h-100 p-3 position-relative d-flex flex-column"> <!-- Added height & flex -->
            <div class="text-center mb-2">
              <img 
                src="images/keyboard.jpg" 
                alt="AK-900 Wired Keyboard" 
                class="img-fluid product-img"
              />
            </div>
            <button class="btn btn-danger w-100 btn-sm mb-1">Add To Cart</button>
            <p class="mb-0 fw-semibold">AK-900 Wired Keyboard</p>
            <p class="text-danger mb-1">$200</p>
            <div class="star-rating">
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
              <span class="text-muted">(65)</span>
            </div>
          </div>
        </div>
      <!-- Repeat for other products -->
    </div>
  </div>
</div>

<!-- Bootstrap JavaScript -->
<div id = "footer"></div>
<!-- Add to Cart Modal -->
<div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="cartModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="cartModalLabel">Cart Update</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="cartModalBody">
        <!-- We will dynamically insert the product info here via JavaScript -->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Continue Shopping</button>
        <a href="cart.html" class="btn btn-danger">Go to Cart</a>
      </div>
    </div>
  </div>
</div>
<script src = "hfload.js"></script>
<script 
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js">
</script>
<script>
document.addEventListener("DOMContentLoaded", function () {
  // DOM Elements
  const wishlistContainer = document.getElementById("wishlistContainer");
  const wishlistHeader = document.getElementById("wishlistHeader");
  const moveAllBtn = document.getElementById("moveAllButton");

  // Initialize Data
  let wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];
  let cart = JSON.parse(localStorage.getItem("cart")) || [];

  // Update wishlist count display
  const updateWishlistCount = () => {
    wishlistHeader.textContent = `Wishlist (${wishlist.length})`;
  };

  // Render wishlist items
  const renderWishlist = () => {
    wishlistContainer.innerHTML = wishlist.length === 0 
      ? `<div class="col">Your wishlist is empty!</div>`
      : wishlist.map(item => `
          <div class="col">
            <div class="product-card h-100 p-3 position-relative d-flex flex-column">
              <button class="icon-btn remove-wishlist-item">
                <i class="bi bi-trash"></i>
              </button>
              <div class="text-center mb-2">
                <img src="${item.image}" alt="${item.name}" class="img-fluid product-img" />
              </div>
              <button class="btn btn-danger btn-sm mb-1 add-to-cart-btn">Add To Cart</button>
              <p class="mb-0 fw-semibold">${item.name}</p>
              <p class="text-danger mb-0">$${item.price}</p>
            </div>
          </div>
        `).join('');
  };

  // Remove item from wishlist
  const removeItem = (productName) => {
    wishlist = wishlist.filter(item => item.name !== productName);
    localStorage.setItem("wishlist", JSON.stringify(wishlist));
    renderWishlist();
    updateWishlistCount();
  };

  // Add item to cart
  const addToCart = (product) => {
    const existingProduct = cart.find(item => item.name === product.name);
    existingProduct ? existingProduct.quantity += 1 : cart.push({...product, quantity: 1});
    localStorage.setItem("cart", JSON.stringify(cart));
    // ❗️ Remove it from the wishlist as well
  removeItem(product.name);
    // Show confirmation modal
    new bootstrap.Modal(document.getElementById('cartModal')).show();
    document.getElementById('cartModalBody').textContent = `${product.name} added to cart!`;
  };

  // Event Delegation
  wishlistContainer.addEventListener('click', (e) => {
    const card = e.target.closest('.product-card');
    if (!card) return;

    // Handle remove button
    if (e.target.closest('.remove-wishlist-item')) {
      const productName = card.querySelector('.product-img').alt;
      removeItem(productName);
    }

    // Handle add to cart button
    if (e.target.closest('.add-to-cart-btn')) {
      const product = wishlist.find(item => item.name === card.querySelector('.product-img').alt);
      addToCart(product);
    }
  });

  // Move all to cart
  moveAllBtn.addEventListener('click', () => {
    cart = [...cart, ...wishlist.map(item => ({...item, quantity: 1}))];
    localStorage.setItem("cart", JSON.stringify(cart));
    wishlist = [];
    localStorage.removeItem("wishlist");
    renderWishlist();
    updateWishlistCount();
  });

  // Initial render
  renderWishlist();
  updateWishlistCount();
});


</script>
</body>
</html>
